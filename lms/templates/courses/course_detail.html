{% block content %}
<body>
    {% load crispy_forms_tags %}
    <div class="course-detail">
        <h1>Detail</h1>
        {% if lectures %}
        <ul>
            {% for lecture in lectures %}
            <li>
                {% if lecture %}
                    <a>Lecture :</a>
                    {{ lecture.lecture }}
                    {% if lecture.units %}
                    <ul>
                        {% for unit in lecture.units %}
                        <li>
                            {{ unit }}:
                            <div>
                                <table style="border: 1px solid;">
                                    <tr style="border: 1px solid;">
                                        <th style="border: 1px solid;">Notes</th>
                                        <td style="border: 1px solid;"><a>{{ unit.notes }}</a></td>
                                    </tr>
                                    <tr style="border: 1px solid;">
                                        <th style="border: 1px solid;">Slide</th>
                                        <td style="border: 1px solid;">
                                            {% if unit.slide %}
                                                <a href="{% url 'view_file' unit.slide.path %}">{{ unit.get_slide_name }}</a>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    <tr style="border: 1px solid;">
                                        <th style="border: 1px solid;">Video</th>
                                        <td style="border: 1px solid;">
                                            {% if unit.video %}
                                                <iframe src="{{ unit.video }}" type="video|mp4" width="640" height="480"></iframe>
                                            {% endif %}
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            
                            {% if can_modify_obj %}
                            <div>
                                <form action="{% url 'delete_obj' unit.id %}" method="POST">
                                    {% csrf_token %}
                                    <button type="submit">Delete</button>
                                </form>
                            </div>
                            <div>
                                <form action="{% url 'modify_obj' unit.id %}" method="GET">
                                    {% csrf_token %}
                                    <button type="submit" name="save-changes">Modify</button>
                                </form>
                            </div>
                            {% endif %}
                            <br>
                        </li>
                        {% endfor %}
                    </ul>
                    <br>
                    {% endif %}

                    <ul>{% if unit_form %}
                        <li>
                            <i>Add unit</i>
                            <form method="POST">
                                {% csrf_token %}
                                {{ unit_form|crispy }}
                                <button type="submit" name="add_unit">Add</button>
                            </form>
                        </li>
                            <!--{% if can_modify_obj %}
                            <button onclick="toggle()">Add unit</button>
                            <div id='add-unit-area' style="display: none;">
                                <form method="POST">
                                    {% csrf_token %}
                                    {{ unit_form|crispy }}
                                    <button type="submit" name="add_unit">Add</button>
                                </form>
                            </div>
                            {% endif %}-->
                            {#{% include 'courses/create_lect.html' %}#}
                        {% endif %}
                    </ul>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        {% endif %}
        
        <ul>
            {% if lecture_form %}
            <li>
                <i>Add lecture</i>
                <form method="POST">
                    {% csrf_token %}
                    {{ lecture_form|crispy }}
                    <button type="submit" name="add_lect">Add</button>
                </form>
            </li>
            {% endif %}
        </ul>
    </div>

    <!--<script>
        function toggle() {
            var add_unit_area = document.getElementById("add-unit-area");
            if (add_unit_area.style.display === "none") {
                add_unit_area.style.display = "block"
            } else {
                add_unit_area.style.display = "none"
            }
        }
    </script>-->
</body>
{% endblock %}